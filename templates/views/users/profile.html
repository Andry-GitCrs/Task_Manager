{% extends "views/users/base.html" %}
{% block title %}My profile{% endblock %}
{% block profile %}
    active-dash-link
{% endblock %}
{% block head %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@4.1.7/index.min.css">
{% endblock %}
{% block content %}
<div class="container-fluid py-5">
    <div class="row">
        <div class="col-md-8 col-sm-12 mb-4">
            <div class="card shadow-sm h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <h5 class="card-title mb-0 ">Daily Finished Subtasks</h5>
                  <button class="btn btn-sm btn-outline-primary rounded-pill" id="refreshChart">Refresh</button>
                </div>
                <div style="height: 300px;">
                  <canvas id="subtaskLineChart"></canvas>
                </div>
                <div id="chartStatus" class="text-muted small mt-2">Loading chart...</div>
              </div>
            </div>
        </div>
        <form id="update-form" class="col-md-4 col-sm-12">
            <h4>
                <i class="text-success fas fa-user-pen"></i>
                Edit credentials
            </h4>
            <div class="mb-3">
                <label for="email" class="form-label">
                    <i class="fas fa-envelope text-secondary" ></i> 
                    Email
                </label>
                <input name="current-email" type="email" value="{{ email }}" class="form-control rounded-pill" id="email" placeholder="example@mail.com" autocomplete="email" disabled>
            </div>
        
            <div class="mb-3">
                <label for="current_password" class="form-label">
                    <i class="fas fa-key text-success"></i> 
                    Current password
                </label>
                <input name="current_password" type="password" class="form-control rounded-pill" id="current_password" autocomplete="current_password" required>
            </div>
        
            <div class="mb-3">
              <label for="new_password" class="form-label">
                    <i class="fas fa-lock text-danger"></i>
                    New Password
                </label>
              <input name="new_password" type="password" class="form-control rounded-pill" id="new_password" autocomplete="new_password" required>
            </div>
        
            <div class="mb-3">
                <label for="confirm_password" class="form-label">
                    <i class="fas fa-lock text-danger"></i>
                    Confirm Password
                </label>
                <input name="confirm_password" type="password" class="form-control rounded-pill" id="confirm_password" autocomplete="confirm_password" required>
            </div>
        
            <div class="text-center">
                <button type="submit" class="btn btn-success w-50 rounded-pill"><i class="fas fa-user-pen"></i> Update</button>
            </div>
        </form>
    </div>
    <div id="task-list" class="my-5"></div>
</div>
{% endblock %}
{% block script %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/users/profile.js') }}"></script>
{% endblock %}