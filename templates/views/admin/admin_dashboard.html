{% extends 'views/admin/base.html' %}
{% block title %}
    Admin Dashboard
{% endblock %}
{% block head %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>
    <style>
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .stat-card {
            transition: transform 0.2s ease-in-out;
        }
        .stat-card:hover {
            transform: scale(1.03);
        }
        #percentage {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin-top: 20px;
        }
        #user_activity_lineChart, #usersChart {
            max-height: 350px;
            width: 100% !important;
        }
        #user_circularChart {
            max-width: 100%;
            height: auto;
        }
    </style>
{% endblock %}
{% block dashboardActive %}
    border shadow
{% endblock %}
{% block content %}
<div class="container-fluid rounded-3 py-3">
    <div class="row g-3">
        <div class="col-md-6 col-xl-3">
            <div class="card stat-card text-bg-warning text-center shadow-sm h-100">
                <div class="card-body bg-light rounded-3">
                    <i class="fas fa-users text-secondary card-icon"></i>
                    <h5 class="card-title">Total Users</h5>
                    <p class="card-text display-6" id="total_users">n/a</p>
                    <hr class="border-secondary">
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3">
            <div class="card stat-card text-bg-success text-center shadow-sm h-100">
                <div class="card-body bg-light rounded-3">
                    <i class="fas fa-tasks text-success card-icon"></i>
                    <h5 class="card-title text-dark">Users Tasks</h5>
                    <p class="card-text display-6 text-dark" id="users_tasks">n/a</p>
                    <hr class="border-success">
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3">
            <div class="card stat-card text-bg-info text-center shadow-sm h-100">
                <div class="card-body bg-light rounded-3">
                    <i class="fas fa-list text-warning card-icon"></i>
                    <h5 class="card-title text-dark">Subtasks</h5>
                    <p class="card-text display-6 text-dark" id="users_subtasks">n/a</p>
                    <hr class="border-warning" id="users_subtasks_percent">
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3">
            <div class="card stat-card text-bg-danger text-center shadow-sm h-100">
                <div class="card-body bg-light rounded-3">
                    <i class="fas fa-check-double text-success card-icon"></i>
                    <h5 class="card-title text-dark">Finished Subtasks</h5>
                    <p class="card-text display-6 text-dark" id="finished_subtasks">n/a</p>
                    <hr class="border-success">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid bg-white shadow-sm p-3 charts_container rounded-3 mt-4">
    <div class="row g-3">
        <div class="col-lg-7">
            <div class="border rounded-3 p-3 h-100">
                <h4 class="text-center mb-3">
                    <i class="fas fa-chart-line text-primary"></i> User Activity Line Chart
                </h4>
                <canvas id="user_activity_lineChart"></canvas>
            </div>
        </div>
        <div class="col-lg-5">
            <div class="border rounded-3 p-3 h-100 d-flex flex-column justify-content-center align-items-center">
                <div id="percentage">
                    <span id="percentage_nbr">n/a</span><span style="font-size: 1rem;">%</span>
                </div>
                <canvas id="user_circularChart"></canvas>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-12">
            <div class="border rounded-3 p-3">
                <canvas id="usersChart"></canvas>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
    <script src="{{ url_for('static', filename='js/admin/admin_dashboard.js') }}" ></script>
{% endblock %}
